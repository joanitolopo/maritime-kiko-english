{% extends 'base.html' %}
{% block title %}Reset Your Password{% endblock %}

{% block page_css %}
<!-- Menggunakan file CSS baru yang mirip dengan login.css -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/reset_password.css') }}">
{% endblock %}

{% block content %}
<!-- Header: Hanya logo di kiri -->
<header class="bg-white py-3 shadow-sm hero-header">
    <div class="container d-flex justify-content-start align-items-center">
        <div class="logo d-flex align-items-center">
            <img src="{{ url_for('static', filename='img/logo_website.png') }}" alt="Maritime English Logo" class="logo-img">
        </div>
    </div>
</header>

<!-- Wrapper Halaman Utama -->
<div class="reset-page-wrapper">
    <div class="container">
        <!-- Kotak putih pembungkus form -->
        <div class="reset-box">
            
            <h1 class="reset-title mb-3">Set New Password</h1>
            <p class="reset-subtitle mb-4">Please enter and confirm your new password below.</p>

            <!-- Form men-submit ke URL saat ini, termasuk token -->
            <form method="POST" action="{{ url_for('auth.reset_password', token=token) }}" id="reset-form">
                
                <div class="mb-3">
                    <label for="password" class="form-label">New Password</label>
                    <input type="password" class="form-control form-control-lg" id="password" name="password" required>
                </div>

                <div class="mb-3">
                    <label for="confirm_password" class="form-label">Confirm New Password</label>
                    <input type="password" class="form-control form-control-lg" id="confirm_password" name="confirm_password" required>
                </div>
                
                <!-- Pesan error untuk validasi JavaScript -->
                <div id="password-error" class="text-danger" style="display: none; font-size: 0.9rem;">
                    Passwords do not match.
                </div>

                <button type="submit" class="btn btn-submit-reset btn-lg w-100 mt-4">
                    Set New Password
                </button>
            </form>

        </div> <!-- / .reset-box -->
    </div> <!-- / .container -->
</div> <!-- / .reset-page-wrapper -->
{% endblock %}

{% block page_js %}
<script>
    // Validasi JavaScript sederhana untuk 'Confirm Password'
    document.getElementById('reset-form').addEventListener('submit', function(event) {
        const password = document.getElementById('password').value;
        const confirm_password = document.getElementById('confirm_password').value;
        const errorDiv = document.getElementById('password-error');

        if (password !== confirm_password) {
            // Hentikan form agar tidak terkirim
            event.preventDefault(); 
            errorDiv.style.display = 'block';
        } else {
            errorDiv.style.display = 'none';
        }
    });
</script>
{% endblock %}
