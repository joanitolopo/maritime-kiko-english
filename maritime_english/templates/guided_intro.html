{% extends 'base.html' %}
{% block title %}Unit {{ unit_id }} - Radio Watch Duty{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/guided_intro.css') }}">
{% endblock %}

{% block content %}
<!-- HEADER -->
<header class="top-bar">
    <div class="container d-flex justify-content-end align-items-center header-right-group">
        <a href="{{ url_for('learning.learning_unit', unit_id=unit_id, section='noticing_numbers') }}" class="btn-learn-nav btn-back" aria-label="Back to Exchange">
            <i class="fas fa-chevron-left me-1"></i>
            <span class="btn-text">Back</span>
        </a>
        
        <div class="current-unit-title d-flex align-items-center ms-3 me-3">
            <i class="fas fa-anchor me-2"></i>
            <span><span>Unit {{ unit_id }} - {{ unit_data.title }}</span></span>
        </div>

        <a href="{{ url_for('main.home') }}" class="btn-learn-nav btn-home" aria-label="Home">
            <i class="fas fa-home"></i>
        </a>
    </div>
</header>

<!-- MAIN CONTENT -->
<div class="main-content">
    
    <!-- LEFT SIDEBAR -->
    <aside class="guided-sidebar">
        
        <!-- Title Container -->
        <div class="title-container">
            <div class="main-title">
                <i class="fa-solid fa-ship"></i>
                Sail Through the Real Challenge
            </div>
            <div class="sub-title">
                Activity 8: Radio Watch Duty
            </div>
        </div>

        <!-- Captain Section -->
        <img src="{{ url_for('static', filename='img/captain_radio_check_5.png') }}" alt="Captain Character" class="captain-image">
        
        <!-- Speech Bubble -->
        <div class="guided-bubble">
            <p class="speech-text-guided">
                "Cadet, this time you'll sail through a real-life situation. Read each story carefully and imagine what's happening at sea. Then, decide what to say as the caller and as the receiver. Remember, clear radio messages can save lives!"
            </p>
            
            <div class="guided-controls">
                <i class="fa-solid fa-play"></i>
                <i class="fa-solid fa-language"></i>
            </div>
        </div>
        
    </aside>

    <!-- RIGHT CONTENT -->
    <main class="activity-area">
        
        <!-- Activity Header -->
        <div class="activity-area-title">
            <i class="fa-solid fa-comments"></i>
            <p class="instruction-text-guided">
                Read the situation. Identify your role (caller and receiver). Say both messages aloud using the correct maritime alphabet and number pronunciation.
            </p>
        </div>
        
        <!-- Situations Container -->
        <div class="situations-container">
            
            <!-- SITUATION 1 -->
            <div class="situation-card" data-situation="1">
                <div class="situation-header">
                    <div class="situation-number">
                        <i class="fas fa-map-marked-alt"></i>
                        <span>Situation 1</span>
                    </div>
                    <div class="situation-badge">Lombok Strait</div>
                </div>

                <div class="situation-story">
                    <div class="story-scene">
                        <div class="scene-icon">
                            <i class="fas fa-moon"></i>
                            <span>Late Night</span>
                        </div>
                        <div class="scene-weather">
                            <i class="fas fa-water"></i>
                            <span>Calm Waters</span>
                        </div>
                    </div>

                    <p class="story-text">
                        Late at night, <strong>MV CORALIS</strong> (MMSI: 538209100, Call Sign: CLFW2), a research vessel, is sailing through the calm waters of the Lombok Strait. On the radar, another vessel appears - <strong>MV SILVERWIND</strong> (MMSI: 312985600, Call Sign: SVNP4) - moving in the opposite direction.
                    </p>

                    <p class="story-text">
                        To ensure safe passage, the captain of Coralis decides to make a short radio call to check whether the channel is clear before crossing paths.
                    </p>

                    <div class="challenge-prompt">
                        <i class="fas fa-lightbulb"></i>
                        <p>Now, imagine you are a radio operator trainee observing this situation. Take both roles, first as the caller (Coralis), then as the receiver (Silverwind).</p>
                    </div>
                </div>

                <div class="vessels-display">
                    <div class="vessel-card caller-vessel">
                        <div class="vessel-role">
                            <i class="fas fa-bullhorn"></i>
                            <span>Caller</span>
                        </div>
                        <div class="vessel-info">
                            <h4>MV CORALIS</h4>
                            <div class="vessel-details">
                                <span><i class="fas fa-hashtag"></i> MMSI: 538209100</span>
                                <span><i class="fas fa-signal"></i> Call Sign: CLFW2</span>
                            </div>
                        </div>
                    </div>

                    <div class="arrow-exchange">
                        <i class="fas fa-exchange-alt"></i>
                    </div>

                    <div class="vessel-card receiver-vessel">
                        <div class="vessel-role">
                            <i class="fas fa-headphones"></i>
                            <span>Receiver</span>
                        </div>
                        <div class="vessel-info">
                            <h4>MV SILVERWIND</h4>
                            <div class="vessel-details">
                                <span><i class="fas fa-hashtag"></i> MMSI: 312985600</span>
                                <span><i class="fas fa-signal"></i> Call Sign: SVNP4</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tasks-section">
                    <div class="task-item">
                        <div class="task-question">
                            <span class="task-num">1</span>
                            <p>What message should Coralis send?</p>
                        </div>
                        <button class="mic-btn-task" data-task="situation1-caller" data-card-index="0">
                            <i class="fas fa-microphone"></i>
                            <span>Record</span>
                        </button>
                    </div>

                    <div class="task-item">
                        <div class="task-question">
                            <span class="task-num">2</span>
                            <p>What message should Silverwind reply?</p>
                        </div>
                        <button class="mic-btn-task" data-task="situation1-receiver" data-card-index="1">
                            <i class="fas fa-microphone"></i>
                            <span>Record</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- SITUATION 2 -->
            <div class="situation-card" data-situation="2">
                <div class="situation-header">
                    <div class="situation-number">
                        <i class="fas fa-map-marked-alt"></i>
                        <span>Situation 2</span>
                    </div>
                    <div class="situation-badge">Kupang Bay</div>
                </div>

                <div class="situation-story">
                    <div class="story-scene">
                        <div class="scene-icon">
                            <i class="fas fa-sun"></i>
                            <span>Afternoon</span>
                        </div>
                        <div class="scene-weather">
                            <i class="fas fa-cloud"></i>
                            <span>Misty Weather</span>
                        </div>
                    </div>

                    <p class="story-text">
                        In the afternoon, <strong>MV CRYSTAL WAVE</strong> (MMSI: 239814900, Call Sign: CWTR8) is sailing slowly through Kupang Bay under misty weather conditions. The crew notices another ship, <strong>MV EMERALD SKY</strong> (MMSI: 519402300, Call Sign: EMSK7), appearing on the radar about two miles ahead.
                    </p>

                    <p class="story-text">
                        The captain decides to establish contact to confirm the nearby vessel's identity and ensure both ships are on safe routes.
                    </p>

                    <div class="challenge-prompt">
                        <i class="fas fa-lightbulb"></i>
                        <p>Now, imagine you are a radio operator trainee observing this situation. Take both roles, first as the caller (Crystal Wave), then as the receiver (Emerald Sky).</p>
                    </div>
                </div>

                <div class="vessels-display">
                    <div class="vessel-card caller-vessel">
                        <div class="vessel-role">
                            <i class="fas fa-bullhorn"></i>
                            <span>Caller</span>
                        </div>
                        <div class="vessel-info">
                            <h4>MV CRYSTAL WAVE</h4>
                            <div class="vessel-details">
                                <span><i class="fas fa-hashtag"></i> MMSI: 239814900</span>
                                <span><i class="fas fa-signal"></i> Call Sign: CWTR8</span>
                            </div>
                        </div>
                    </div>

                    <div class="arrow-exchange">
                        <i class="fas fa-exchange-alt"></i>
                    </div>

                    <div class="vessel-card receiver-vessel">
                        <div class="vessel-role">
                            <i class="fas fa-headphones"></i>
                            <span>Receiver</span>
                        </div>
                        <div class="vessel-info">
                            <h4>MV EMERALD SKY</h4>
                            <div class="vessel-details">
                                <span><i class="fas fa-hashtag"></i> MMSI: 519402300</span>
                                <span><i class="fas fa-signal"></i> Call Sign: EMSK7</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tasks-section">
                    <div class="task-item">
                        <div class="task-question">
                            <span class="task-num">1</span>
                            <p>What message should Crystal Wave send?</p>
                        </div>
                        <button class="mic-btn-task" data-task="situation2-caller" data-card-index="2">
                            <i class="fas fa-microphone"></i>
                            <span>Record</span>
                        </button>
                    </div>

                    <div class="task-item">
                        <div class="task-question">
                            <span class="task-num">2</span>
                            <p>What message should Emerald Sky reply?</p>
                        </div>
                        <button class="mic-btn-task" data-task="situation2-receiver" data-card-index="3">
                            <i class="fas fa-microphone"></i>
                            <span>Record</span>
                        </button>
                    </div>
                </div>
            </div>

        </div>
        
    </main>

</div>

<!-- FOOTER -->
<footer class="footer-nav">
    <a href="{{ url_for('learning.learning_unit', unit_id=unit_id, section='guided_task_1') }}" class="continue-button">
        <span>Continue</span>
        <i class="fas fa-chevron-right ms-1"></i>
    </a>
</footer>

{% endblock %}

{% block page_js %}
<script>
    window.UNIT_CONTENT = {{ (content or {})|tojson|safe }};
    window.SECTION_CONTENT = {{ (section_content or {})|tojson|safe }};
    window.UNIT_ID = {{ unit_id | default(0) }};
</script>
<script src="{{ url_for('static', filename='js/guided_intro.js') }}"></script>
{% endblock %}