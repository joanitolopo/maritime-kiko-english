{% extends 'base.html' %}
{% block title %}Unit {{ unit_id }} - Radio Spelling Practice{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/noticing_numbers.css') }}">
{% endblock %}

{% block content %}
<!-- HEADER -->
<header class="top-bar">
    <div class="container d-flex justify-content-end align-items-center header-right-group">
        <a href="{{ url_for('learning.learning_unit', unit_id=unit_id, section='noticing_intro') }}" class="btn-learn-nav btn-back" aria-label="Back to Noticing Intro">
            <i class="fas fa-chevron-left me-1"></i>
            <span class="btn-text">Back</span>
        </a>
        
        <div class="current-unit-title d-flex align-items-center ms-3 me-3">
            <i class="fas fa-anchor me-2"></i>
            <span>Unit {{ unit_id }} - {{ unit_data.title }}</span>
        </div>

        <a href="{{ url_for('main.home') }}" class="btn-learn-nav btn-home" aria-label="Home">
            <i class="fas fa-home"></i>
        </a>
    </div>
</header>

<!-- MAIN CONTENT -->
<div class="main-content">
    
    <!-- LEFT SIDEBAR -->
    <aside class="drill-sidebar">
        
        <div class="activity-badge">
            <div class="badge-icon">
                <i class="fa-solid fa-anchor"></i>
            </div>
            <div class="badge-text">
                <h4>E. Drill It Like a Seafarer</h4>
                <p>Activity 6. Radio Spelling Practice</p>
            </div>
        </div>

        <!-- Captain Section with Radio Waves -->
        <div class="captain-instruction-card">
            <div class="captain-avatar-wrapper">
                <img src="{{ url_for('static', filename='img/captain_radio_check_5.png') }}" alt="Captain Character" class="captain-avatar">
                <div class="radio-waves">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            
            <!-- Speech Bubble -->
            <div class="instruction-bubble">
                <p class="speech-text-drill">
                    Cadets, it's time to drill your pronunciation! Listen carefully to the example, then spell and say each vessel's identification clearly — just like a real seafarer!
                </p>
                
                <div class="drill-controls">
                    <button class="control-btn audio-btn" id="captain-audio-btn">
                        <i class="fa-solid fa-play"></i>
                    </button>
                    <button class="control-btn translate-btn" id="translate-btn">
                        <i class="fa-solid fa-language"></i>
                        <span>Translate</span>
                    </button>
                </div>
            </div>
        </div>
        
    </aside>

    <!-- RIGHT CONTENT -->
    <main class="activity-area">
        
        <!-- Activity Header -->
        <div class="activity-area-title">
            <div class="title-icon">
                <i class="fa-solid fa-headphones"></i>
            </div>
            <p class="instruction-text-drill">
                Listen to the example, then read your vessel card and say the name, MMSI, and Call Sign using the same format. Speak clearly.
            </p>
        </div>
        
        <!-- EXAMPLE SECTION - RADIO COMMUNICATION STYLE -->
        <div class="example-section">
            <div class="example-header">
                <div class="example-header-icon">
                    <i class="fa-solid fa-volume-high"></i>
                </div>
                <h3 class="example-header-title">Listen to the example</h3>
            </div>
            
            <div class="example-radio-card">
                <div class="example-communication-grid">
                    
                    <!-- Left Side: Avatar and Info -->
                    <div class="example-info-section">
                        <div class="example-vessel-display">
                            <div class="example-vessel-avatar">
                                <img src="{{ url_for('static', filename='img/captain_radio_check_4.png') }}" alt="ANTARES">
                            </div>
                            <div class="example-vessel-details">
                                <p><span class="detail-label">Vessel's Name:</span><br><span class="detail-value">ANTARES</span></p>
                                <p><span class="detail-label">MMSI:</span><br><span class="detail-value">257689000</span></p>
                                <p><span class="detail-label">Call Sign:</span><br><span class="detail-value">LAPW5</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Side: Transcript -->
                    <div class="example-transcript-section">
                        <div class="transcript-box">
                            <button class="transcript-play-btn" 
                                    data-audio-src="/static/data/audio/unit1/example_antares.wav">
                                <i class="fa-solid fa-play"></i>
                            </button>
                            <div class="transcript-text">
                                <p>This is too-fife-seven-six-ait-niner-zeero-zeero-zeero.<br>
                                Motor Vessel "ANTARES" Alfa November Tango Alfa Romeo Echo Sierra.<br>
                                Call Sign Lima Alfa Papa Whisky Fife</p>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        
        <!-- SPEAK NOW SECTION -->
        <div class="speak-cards-container">
            <div class="speak-header">
                <div class="speak-header-main">
                    <i class="fa-solid fa-hand-point-right"></i>
                    <h3 class="speak-title-text">Your Turn — Speak Clearly</h3>
                </div>
                <p class="speak-subtitle">Follow the same format as the example above.</p>
            </div>
            
            <!-- CARD 1 -->
            <div class="speak-card" data-card-index="0">
                <div class="card-number-badge">1</div>
                
                <div class="speak-card-content">
                    <div class="vessel-avatar-section">
                        <img src="{{ url_for('static', filename='img/captain_radio_check_8.png') }}" alt="Vessel 1">
                    </div>
                    
                    <div class="vessel-info-section">
                        <p><span class="info-label">Vessel's Name:</span><br><span class="info-value">APOLLON</span></p>
                        <p><span class="info-label">MMSI:</span><br><span class="info-value">237002600</span></p>
                        <p><span class="info-label">Call Sign:</span><br><span class="info-value">SWFP</span></p>
                    </div>
                    
                    <div class="speak-action-section">
                        <button class="speak-now-btn" data-task="task1">
                            <i class="fa-solid fa-microphone"></i>
                            <span>Speak Now</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- CARD 2 -->
            <div class="speak-card" data-card-index="1">
                <div class="card-number-badge">2</div>
                
                <div class="speak-card-content">
                    <div class="vessel-avatar-section">
                        <img src="{{ url_for('static', filename='img/captain_radio_check_4.png') }}" alt="Vessel 2">
                    </div>
                    
                    <div class="vessel-info-section">
                        <p><span class="info-label">Vessel's Name:</span><br><span class="info-value">BAYSTAR</span></p>
                        <p><span class="info-label">MMSI:</span><br><span class="info-value">440983000</span></p>
                        <p><span class="info-label">Call Sign:</span><br><span class="info-value">DSON9</span></p>
                    </div>
                    
                    <div class="speak-action-section">
                        <button class="speak-now-btn" data-task="task2">
                            <i class="fa-solid fa-microphone"></i>
                            <span>Speak Now</span>
                        </button>
                    </div>
                </div>
            </div>
            
        </div>
        
    </main>

</div>

<!-- FOOTER -->
<div class="continue-wrapper">
    <a href="{{ url_for('learning.complete_subunit', unit_id=unit_id, subunit_index=5) }}" class="continue-button">
        <span>Continue Sailing</span>
    </a>
</div>

{% endblock %}

{% block page_js %}
<script>
    window.UNIT_CONTENT = {{ (content or {})|tojson|safe }};
    window.SECTION_CONTENT = {{ (section_content or {})|tojson|safe }};
    window.UNIT_ID = {{ unit_id | default(0) }};
</script>
<script src="{{ url_for('static', filename='js/noticing_numbers.js') }}"></script>
{% endblock %}